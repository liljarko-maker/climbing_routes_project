# üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ë–î

## üéØ –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞—Å—Å. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Django –≤ Google —Ç–∞–±–ª–∏—Ü—ã –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ.

## üîß –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. **Google Sheets API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –ú–æ–¥—É–ª—å `routes/google_sheets.py` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- –ö–ª–∞—Å—Å `GoogleSheetsManager` –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ö–ª–∞—Å—Å `RoutesGoogleSheetsSync` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Å—Å

### 2. **–ù–æ–≤—ã–µ API endpoints**
- `POST /api/google-sheets/export/` - –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ç—Ä–∞—Å—Å –≤ Google Sheets
- `POST /api/google-sheets/import/` - –ò–º–ø–æ—Ä—Ç —Ç—Ä–∞—Å—Å –∏–∑ Google Sheets
- `GET /api/google-sheets/status/` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django**
- `GOOGLE_SHEETS_ID` - ID –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü—ã
- `GOOGLE_CREDENTIALS_PATH` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Google Cloud –ø—Ä–æ–µ–∫—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Google Sheets API:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "APIs & Services" > "Library"
   - –ù–∞–π–¥–∏—Ç–µ "Google Sheets API" –∏ –≤–∫–ª—é—á–∏—Ç–µ –µ–≥–æ

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

1. –í Google Cloud Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "APIs & Services" > "Credentials"
2. –ù–∞–∂–º–∏—Ç–µ "Create Credentials" > "Service Account"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   - **Name**: `climbing-routes-service`
   - **Description**: `Service account for climbing routes project`
4. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á:
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π service account
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Keys" > "Add Key" > "Create new key"
   - –í—ã–±–µ—Ä–∏—Ç–µ "JSON" —Ñ–æ—Ä–º–∞—Ç
   - –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `credentials.json`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é Google —Ç–∞–±–ª–∏—Ü—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã –∏–∑ URL (–º–µ–∂–¥—É `/d/` –∏ `/edit`)
3. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ç–∞–±–ª–∏—Ü–µ–π —Å service account:
   - –ù–∞–∂–º–∏—Ç–µ "Share" –≤ Google Sheets
   - –î–æ–±–∞–≤—å—Ç–µ email service account (–∏–∑ credentials.json)
   - –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ "Editor"

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django –ø—Ä–æ–µ–∫—Ç–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

2. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª credentials.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞:**
   ```
   climbing_routes_project/
   ‚îú‚îÄ‚îÄ credentials.json  # ‚Üê –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Å—é–¥–∞
   ‚îú‚îÄ‚îÄ manage.py
   ‚îî‚îÄ‚îÄ ...
   ```

3. **–û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `settings.py`:**
   ```python
   # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è
   GOOGLE_SHEETS_ID = 'your-actual-sheets-id-here'
   GOOGLE_CREDENTIALS_PATH = 'credentials.json'
   ```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   python manage.py runserver
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   ```bash
   curl http://127.0.0.1:8000/api/google-sheets/status/
   ```

3. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ:**
   ```bash
   curl -X POST http://127.0.0.1:8000/api/google-sheets/export/
   ```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets
```bash
curl -X POST http://127.0.0.1:8000/api/google-sheets/export/
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "–£—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 10 —Ç—Ä–∞—Å—Å –≤ Google Sheets",
    "exported_count": 10
}
```

### –ò–º–ø–æ—Ä—Ç –∏–∑ Google Sheets
```bash
curl -X POST http://127.0.0.1:8000/api/google-sheets/import/
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 5 —Ç—Ä–∞—Å—Å –∏–∑ Google Sheets",
    "imported_count": 5,
    "errors": []
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
curl http://127.0.0.1:8000/api/google-sheets/status/
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "status": "connected",
    "message": "Google Sheets –ø–æ–¥–∫–ª—é—á–µ–Ω —É—Å–ø–µ—à–Ω–æ"
}
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Google Sheets

–¢–∞–±–ª–∏—Ü–∞ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏:

| A | B | C | D | E | F | G | H | I | J | K | L |
|---|---|---|---|---|---|---|---|---|---|---|---|
| ID | –ù–æ–º–µ—Ä —Ç—Ä–∞—Å—Å—ã | –î–æ—Ä–æ–∂–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –¶–≤–µ—Ç | –ê–≤—Ç–æ—Ä | –î–∞—Ç–∞ –Ω–∞–∫—Ä—É—Ç–∫–∏ | –î–∞—Ç–∞ —Å–∫—Ä—É—Ç–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
1. **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ** —Ñ–∞–π–ª `credentials.json` –≤ Git
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`:
   ```
   credentials.json
   *.json
   ```
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
   ```python
   GOOGLE_SHEETS_ID = os.getenv('GOOGLE_SHEETS_ID')
   GOOGLE_CREDENTIALS_PATH = os.getenv('GOOGLE_CREDENTIALS_PATH')
   ```

## üé® –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –≤ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:

```html
<!-- –î–æ–±–∞–≤–∏—Ç—å –≤ templates/home.html -->
<div class="row mb-3">
    <div class="col-12">
        <h4>Google Sheets</h4>
        <button class="btn btn-success" onclick="exportToSheets()">
            <i class="fas fa-upload"></i> –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets
        </button>
        <button class="btn btn-info" onclick="importFromSheets()">
            <i class="fas fa-download"></i> –ò–º–ø–æ—Ä—Ç –∏–∑ Google Sheets
        </button>
        <button class="btn btn-secondary" onclick="checkSheetsStatus()">
            <i class="fas fa-check"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
        </button>
    </div>
</div>
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "Google Sheets API –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É `credentials.json`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "Permission denied"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ service account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### –û—à–∏–±–∫–∞: "API not enabled"
- –í–∫–ª—é—á–∏—Ç–µ Google Sheets API –≤ Google Cloud Console
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è

## üìà –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
2. **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Google Sheets –æ–±–Ω–æ–≤–ª—è—é—Ç Django
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - —ç–∫—Å–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞—Å—Å
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π/–Ω–µ—É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É –≤–∞—Å –±—É–¥–µ—Ç:
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets
- ‚úÖ API –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**Google Sheets —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ë–î!** üìä
