<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèîÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API —Ç—Ä–∞—Å—Å —Å–∫–∞–ª–æ–¥—Ä–æ–º–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{% load static %}{% static 'css/style.css' %}" rel="stylesheet">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-mountain"></i> API –¢—Ä–∞—Å—Å —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –°–∫–∞–ª–æ–¥—Ä–æ–º–∞
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#api">API</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#test">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container mt-4">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h1 class="display-4 text-primary">
                    <i class="fas fa-mountain"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API —Ç—Ä–∞—Å—Å —Å–∫–∞–ª–æ–¥—Ä–æ–º–∞
                </h1>
                <p class="lead text-muted">–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è API —Å–∏—Å—Ç–µ–º—ã —É—á–µ—Ç–∞ —Ç—Ä–∞—Å—Å</p>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div id="stats" class="row mb-5">
            <div class="col-12">
                <h2 class="mb-4"><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-primary text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-route fa-2x mb-2"></i>
                        <h3 class="card-title">{{ total_routes }}</h3>
                        <p class="card-text">–í—Å–µ–≥–æ —Ç—Ä–∞—Å—Å</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-success text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-check-circle fa-2x mb-2"></i>
                        <h3 class="card-title">{{ active_routes }}</h3>
                        <p class="card-text">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞—Å—Å</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-warning text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-pause-circle fa-2x mb-2"></i>
                        <h3 class="card-title">{{ inactive_routes }}</h3>
                        <p class="card-text">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞—Å—Å</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="card bg-info text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-percentage fa-2x mb-2"></i>
                        <h3 class="card-title">
                            {% if total_routes > 0 %}
                                {% widthratio active_routes total_routes 100 %}%
                            {% else %}
                                0%
                            {% endif %}
                        </h3>
                        <p class="card-text">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="mb-3"><i class="fas fa-chart-pie"></i> –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</h3>
                <div class="row">
                    {% for difficulty, stats in difficulty_stats.items %}
                    <div class="col-md-3 mb-3">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title text-{{ difficulty|default:'secondary' }}">
                                    {% if difficulty == 'easy' %}
                                        <i class="fas fa-seedling text-success"></i> 4-6–ê
                                    {% elif difficulty == 'medium' %}
                                        <i class="fas fa-leaf text-warning"></i> 6–í-6–°
                                    {% elif difficulty == 'hard' %}
                                        <i class="fas fa-fire text-danger"></i> 7–ê-7–í
                                    {% elif difficulty == 'expert' %}
                                        <i class="fas fa-skull text-dark"></i> 7–°>
                                    {% else %}
                                        <i class="fas fa-question text-secondary"></i> {{ stats.label }}
                                    {% endif %}
                                </h5>
                                <h2 class="text-primary">{{ stats.count }}</h2>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="mb-3"><i class="fas fa-clock"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç—Ä–∞—Å—Å—ã</h3>
                {% if recent_routes %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ê–≤—Ç–æ—Ä</th>
                                <th>–°–ª–æ–∂–Ω–æ—Å—Ç—å</th>
                                <th>–¶–≤–µ—Ç</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for route in recent_routes %}
                            <tr>
                                <td><strong>{{ route.name }}</strong></td>
                                <td>{{ route.author }}</td>
                                <td>
                                    <span class="badge difficulty-{{ route.difficulty|default:'secondary' }}">
                                        {% if route.difficulty == '4-5' %}
                                            <i class="fas fa-seedling"></i> 4-5
                                        {% elif route.difficulty == '6A' or route.difficulty == '6A+' %}
                                            <i class="fas fa-leaf"></i> {{ route.difficulty }}
                                        {% elif route.difficulty == '6B' or route.difficulty == '6B+' or route.difficulty == '6C' or route.difficulty == '6C+' %}
                                            <i class="fas fa-fire"></i> {{ route.difficulty }}
                                        {% elif route.difficulty == '7A' or route.difficulty == '7A+' or route.difficulty == '7B' or route.difficulty == '7B+' %}
                                            <i class="fas fa-bolt"></i> {{ route.difficulty }}
                                        {% elif route.difficulty == '7C' or route.difficulty == '7C+' or route.difficulty == '8A' or route.difficulty == '8A+' %}
                                            <i class="fas fa-skull"></i> {{ route.difficulty }}
                                        {% elif route.difficulty == '8B' or route.difficulty == '8B+' or route.difficulty == '8C' or route.difficulty == '9A' %}
                                            <i class="fas fa-dragon"></i> {{ route.difficulty }}
                                        {% else %}
                                            {{ route.difficulty }}
                                        {% endif %}
                                    </span>
                                </td>
                                <td>
                                    <span class="badge" style="background-color: {{ route.color }}; color: white;">
                                        {{ route.color }}
                                    </span>
                                </td>
                                <td>
                                    {% if route.is_active %}
                                        <span class="badge bg-success"><i class="fas fa-check"></i> –ê–∫—Ç–∏–≤–Ω–∞</span>
                                    {% else %}
                                        <span class="badge bg-warning"><i class="fas fa-pause"></i> –ù–µ–∞–∫—Ç–∏–≤–Ω–∞</span>
                                    {% endif %}
                                </td>
                                <td>{{ route.created_at|date:"d.m.Y H:i" }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> –ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞—Å—Å
                </div>
                {% endif %}
            </div>
        </div>

        <!-- API Endpoints -->
        <div id="api" class="row mb-5">
            <div class="col-12">
                <h2 class="mb-4"><i class="fas fa-code"></i> API Endpoints</h2>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0"><i class="fas fa-list"></i> –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><code>GET /api/routes/</code> - –°–ø–∏—Å–æ–∫ —Ç—Ä–∞—Å—Å</li>
                                    <li><code>POST /api/routes/</code> - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã</li>
                                    <li><code>GET /api/routes/{id}/</code> - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã</li>
                                    <li><code>PUT /api/routes/{id}/</code> - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã</li>
                                    <li><code>DELETE /api/routes/{id}/</code> - –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0"><i class="fas fa-layer-group"></i> –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><code>POST /api/routes/bulk/</code> - –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ</li>
                                    <li><code>DELETE /api/routes/bulk/</code> - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ</li>
                                    <li><code>POST /api/routes/bulk-update/</code> - –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0"><i class="fas fa-search"></i> –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><code>GET /api/routes/search/</code> - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫</li>
                                    <li><code>GET /api/routes/authors/</code> - –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤</li>
                                    <li><code>GET /api/routes/colors/</code> - –°–ø–∏—Å–æ–∫ —Ü–≤–µ—Ç–æ–≤</li>
                                    <li><code>POST /api/routes/{id}/toggle-active/</code> - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-header bg-warning text-white">
                                <h5 class="mb-0"><i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><code>GET /api/difficulty-levels/</code> - –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</li>
                                    <li><code>GET /api/stats/</code> - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API -->
        <div id="test" class="row mb-5">
            <div class="col-12">
                <h2 class="mb-4"><i class="fas fa-flask"></i> –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API</h2>
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>–ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã:</h6>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary" onclick="testAPI('GET', '/api/routes/')">
                                        <i class="fas fa-list"></i> –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç—Ä–∞—Å—Å—ã
                                    </button>
                                    <button class="btn btn-outline-success" onclick="testAPI('GET', '/api/stats/')">
                                        <i class="fas fa-chart-bar"></i> –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                                    </button>
                                    <button class="btn btn-outline-info" onclick="testAPI('GET', '/api/difficulty-levels/')">
                                        <i class="fas fa-layer-group"></i> –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                                    </button>
                                    <button class="btn btn-outline-warning" onclick="testAPI('GET', '/api/routes/authors/')">
                                        <i class="fas fa-users"></i> –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h6>
                                <div id="api-result" class="border p-3 bg-light" style="min-height: 200px; max-height: 400px; overflow-y: auto;">
                                    <p class="text-muted">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Ç—Ä–∞—Å—Å—ã -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="mb-3"><i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç—Ä–∞—Å—Å—É</h3>
                <div class="card">
                    <div class="card-body">
                        <form id="create-route-form">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="route-name" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã</label>
                                    <input type="text" class="form-control" id="route-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="route-author" class="form-label">–ê–≤—Ç–æ—Ä</label>
                                    <input type="text" class="form-control" id="route-author" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="route-difficulty" class="form-label">–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
                                    <select class="form-select" id="route-difficulty" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å</option>
                                        <option value="4-5">4-5 (–ù–∞—á–∞–ª—å–Ω—ã–π)</option>
                                        <option value="6A">6A (–õ–µ–≥–∫–∏–π)</option>
                                        <option value="6A+">6A+ (–õ–µ–≥–∫–∏–π+)</option>
                                        <option value="6B">6B (–°—Ä–µ–¥–Ω–∏–π)</option>
                                        <option value="6B+">6B+ (–°—Ä–µ–¥–Ω–∏–π+)</option>
                                        <option value="6C">6C (–°—Ä–µ–¥–Ω–∏–π-—Å–ª–æ–∂–Ω—ã–π)</option>
                                        <option value="6C+">6C+ (–°—Ä–µ–¥–Ω–∏–π-—Å–ª–æ–∂–Ω—ã–π+)</option>
                                        <option value="7A">7A (–°–ª–æ–∂–Ω—ã–π)</option>
                                        <option value="7A+">7A+ (–°–ª–æ–∂–Ω—ã–π+)</option>
                                        <option value="7B">7B (–û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π)</option>
                                        <option value="7B+">7B+ (–û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π+)</option>
                                        <option value="7C">7C (–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π)</option>
                                        <option value="7C+">7C+ (–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π+)</option>
                                        <option value="8A">8A (–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π)</option>
                                        <option value="8A+">8A+ (–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π+)</option>
                                        <option value="8B">8B (–≠–ª–∏—Ç–Ω—ã–π)</option>
                                        <option value="8B+">8B+ (–≠–ª–∏—Ç–Ω—ã–π+)</option>
                                        <option value="8C">8C (–ú–∏—Ä–æ–≤–æ–π –∫–ª–∞—Å—Å)</option>
                                        <option value="9A">9A (–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π)</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="route-color" class="form-label">–¶–≤–µ—Ç</label>
                                    <input type="text" class="form-control" id="route-color" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç —Ç—Ä–∞—Å—Å—ã" required>
                                </div>
                                <div class="col-12 mb-3">
                                    <label for="route-description" class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                    <textarea class="form-control" id="route-description" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã"></textarea>
                                </div>
                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞—Å—Å—É
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">
                <i class="fas fa-mountain"></i> –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è API —Ç—Ä–∞—Å—Å —Å–∫–∞–ª–æ–¥—Ä–æ–º–∞
                <br>
                <small class="text-muted">–°–æ–∑–¥–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Django REST Framework</small>
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% load static %}{% static 'js/app.js' %}"></script>
</body>
</html>
